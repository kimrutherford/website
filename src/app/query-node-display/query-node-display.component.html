<div *ngIf="nodeConfig">
  <div class="node-top-description" *ngIf="nodeConfig.topDescription">
    <span *ngFor="let part of nodeConfig.topDescription"><span *ngIf="part.text">{{part.text}}</span><a *ngIf="part.link" routerLink="{{part.link.route}}">{{part.link.link_text}}</a></span>:
  </div>

  <div *ngIf="nodeConfig.nodeType == 'ontology'">
    <app-query-term-node [termNodeConfig]="nodeConfig"
                         [placeholder]="nodeConfig.placeholder ? nodeConfig.placeholder :'Start typing a ' + nodeConfig.displayName + ' term name or ID ...'"
                         (newTermNode)="newTermNode($event)"></app-query-term-node>
  </div>

  <div *ngIf="nodeConfig.id == 'gene_list'">
    <app-gene-list-lookup [lookupFieldType]="'id-and-name'" (genesFound)="genesFound($event)"></app-gene-list-lookup>
  </div>

  <div *ngIf="nodeConfig.id == 'uniprot_id_list'">
    <span>For bulk lookup of UniProt accessions use the</span>
    <a routerLink="/identifier-mapper/">Identifier Mapper</a>
  </div>

  <div *ngIf="nodeConfig.nodeType == 'has-ortholog'">
    <select [(ngModel)]="selectedOrthologOrganism"
            (ngModelChange)="selectedOrthologChange()">
      <option [ngValue]="undefined">Pick a species ...</option>
      <option *ngFor="let org of orthologOrganisms" [ngValue]="org">
        {{org.common_name}}
      </option>
    </select>
  </div>

  <div *ngIf="nodeConfig.nodeType == 'small-ontology'">
    <select [(ngModel)]="selectedTerm"
            (ngModelChange)="smallOntologyChange()">
      <option [ngValue]="undefined">Choose ...</option>
      <option *ngFor = "let term of nodeConfig.terms" [ngValue]="term">
        {{term.name}}
      </option>
    </select>
  </div>

  <div *ngIf="nodeConfig.nodeType == 'subset-select'">
    <select [(ngModel)]="selectedSubset"
            (ngModelChange)="subsetChange()">
      <option [ngValue]="undefined">Choose ...</option>
      <option *ngFor = "let subset of nodeConfig.subsets" [ngValue]="subset">
        {{removePrefix(subset.displayName)}}
      </option>
    </select>
  </div>

  <div *ngIf="nodeConfig.nodeType == 'canned-queries'">
    <div *ngFor="let cannedQueryDetail of cannedQueryDetails">
      <a (click)="selectPredefinedQuery(cannedQueryDetail.queryId)"
         [innerHTML]="cannedQueryDetail.name"></a>
    </div>
  </div>

  <div *ngIf="nodeConfig.nodeType == 'subset-input'">
    <app-query-subset-input [nodeConfig]="nodeConfig"
                            (nodeEvent)="subNodeEvent($event)">
    </app-query-subset-input>
  </div>

  <div *ngIf="nodeConfig.nodeType == 'int-range' || nodeConfig.nodeType == 'float-range'"
       class="range">
    <input type="number" [(ngModel)]="rangeStart" min="1" step="1"
           placeholder="min ..."/>
    <input type="number" [(ngModel)]="rangeEnd" min="1" step="1"
           placeholder="max ..."/>
    <button type="button" class="btn btn-primary"
            [attr.title]="validRange() ? 'Click to search' : 'min must be less than or equal to max'"
            [disabled]="!validRange()" (click)="rangeSearch(nodeConfig)">Search</button>
  </div>

  <div *ngIf="nodeConfig.id == 'genome_range'">
    <div class="node-section">

      <select [(ngModel)]="chromosomeName">
        <option [ngValue]="undefined">Choose a chromosome</option>
        <option *ngFor = "let chrDetails of displayChromosomes"
                [ngValue]="chrDetails.name">
          {{chrDetails.long_display_name}}
        </option>
      </select>

    </div>
    <div class="node-section">
      Restrict to region:
      <input type="number" [(ngModel)]="rangeStart" min="1" step="1"
             placeholder="start base (optional) ..."/>
      <input type="number" [(ngModel)]="rangeEnd" min="1" step="1"
             placeholder="end base (optional) ..."/>
      <div style="color: red" *ngIf="(rangeStart || rangeEnd) &&!validRange()">
        Start position must be less the end position
      </div>
    </div>
    <button type="button" class="btn btn-primary"
            [attr.title]="genomeRangeButtonTitle()"
            [disabled]="(rangeStart || rangeEnd) && !validRange() || !chromosomeName" (click)="genomeRangeSearch()">Search</button>
  </div>

  <div *ngIf="nodeConfig.nodeType == 'sub-nodes'">
    <app-query-sub-nodes [nodeConfig]="nodeConfig"
                         (subNodeEvent)="subNodeEvent($event)">
    </app-query-sub-nodes>
  </div>
</div>
